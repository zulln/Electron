/*eslint-env node*/
module.exports = function gulpTestTaskErrorHandler(callback, failTaskOnError) {
	"use strict";
	return function errorHandler(exitCode) {
		if (failTaskOnError && exitCode > 0) {
			process.exit(exitCode);
		} else {
			// Pass `0` instead of `exitCode` so that `gulp watch` does not stop if the tests fail.
			// `gulp watch` task depends on the `default` task which runs the tests.
			// The `gulp test-watch` task (karma) will not stop either way for some reason.
			callback(0);
		}
	};
};
