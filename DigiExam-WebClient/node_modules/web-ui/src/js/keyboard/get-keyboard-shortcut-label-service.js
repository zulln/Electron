(function iife() {
	"use strict";

	angular.module("dx.webui.keyboard").factory("getKeyboardShortcutLabel", getKeyboardShortcutLabelService);

	function getKeyboardShortcutLabelService(
		detectPlatform
	) {
		// TODO(kenneth): Move to a constant
		var CMD_CHAR = "\u2318";

		return function getKeyboardShortcutLabel(config, forcedPlatform) {
			var label = "";
			var mods = config.modifiersAND || [];
			var platform = forcedPlatform || detectPlatform();

			if (mods.indexOf("meta") > -1) {
				if (platform === "mac") {
					label += CMD_CHAR;
					if (mods.length > 1) {
						label += "+";
					}
				} else {
					label += "Meta+";
				}
			}

			if (mods.indexOf("ctrl") > -1) {
				label += "Ctrl+";
			}

			if (mods.indexOf("shift") > -1) {
				label += "Shift+";
			}

			if (mods.indexOf("alt") > -1) {
				if (platform === "mac") {
					label += "Option+";
				} else {
					label += "Alt+";
				}
			}

			// Only show the first alternative if more than one key can be used.
			label += config.keysOR[0].toUpperCase();

			return label;
		};
	}
}());
