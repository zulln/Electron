(function(){
	"use strict";

	angular.module("dx.webui.sticky").directive("dxSticky", stickyDirective);

	function stickyDirective(
		stickyManager,
		$compile
	) {

		var directive = {
			restrict: "A",
			link: link
		};

		function link($scope, $element, $attr) {
			var $clone = angular.element($element[0].outerHTML);
			var docked = typeof $attr.dxStickyDocked !== "undefined";
			$clone.removeAttr("dx-sticky").attr("dx-sticky-clone", $attr.dxSticky || "top");
			$compile($clone)($scope);

			stickyManager($scope, $element, $clone, docked);
		}

		return directive;

	}

}());
