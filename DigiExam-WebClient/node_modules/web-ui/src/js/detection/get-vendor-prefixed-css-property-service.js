(function iife() {
	"use strict";

	angular.module("dx.webui.detection").factory("getVendorPrefixedCssProperty", getVendorPrefixedCssPropertyService);

	function getVendorPrefixedCssPropertyService(
		$window
	) {
		var cached = {};
		var result = {};
		var prefixes = ["Moz", "Webkit", "O", "ms"];
		var testEl;

		// Use camelCase property names. Yes: userSelect, No: user-select
		return function getVendorPrefixedCssProperty(property, useCachedResult) {
			var useCached = typeof useCachedResult !== "undefined" ? useCachedResult : true;

			if (useCached && cached[property]) {
				return result[property];
			}

			if (!testEl) {
				testEl = $window.document.createElement("div");
			}

			if (property in testEl.style) {
				cached[property] = true;
				result[property] = property;
				return property;
			}

			var upper = property.charAt(0).toUpperCase() + property.slice(1);

			for (var len = prefixes.length; len; len--) {
				if ((prefixes[len] + upper) in testEl.style) {
					cached[property] = true;
					result[property] = prefixes[len] + upper;
					return result[property];
				}
			}

			return false;
		};
	}
}());
